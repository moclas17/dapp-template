"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_reown_appkit-controllers_dist_esm_exports_features_js"],{

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* reexport safe */ _src_features_siwx_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthentication; },\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* reexport safe */ _src_features_siwx_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _src_features_siwx_reown_authentication_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/features/siwx/reown-authentication/index.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/index.js\");\n\n//# sourceMappingURL=features.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL2V4cG9ydHMvZmVhdHVyZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ25FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL2V4cG9ydHMvZmVhdHVyZXMuanM/ZTIzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9zcmMvZmVhdHVyZXMvc2l3eC9yZW93bi1hdXRoZW50aWNhdGlvbi9pbmRleC5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZWF0dXJlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/exports/features.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthentication.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthentication.js ***!
  \***********************************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* binding */ ReownAuthentication; }\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/SafeLocalStorage.js\");\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/ConstantsUtil.js\");\n/* harmony import */ var _controllers_ApiController_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../controllers/ApiController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ApiController.js\");\n/* harmony import */ var _controllers_BlockchainApiController_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../controllers/BlockchainApiController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/BlockchainApiController.js\");\n/* harmony import */ var _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../controllers/ChainController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n/* harmony import */ var _utils_ChainControllerUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/ChainControllerUtil.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/utils/ChainControllerUtil.js\");\n/* harmony import */ var _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReownAuthenticationMessenger.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthenticationMessenger.js\");\n//\n\n\n\n\n\n\n/**\n * This is the configuration for using SIWX with Reown Authentication service.\n * It allows you to authenticate and capture user sessions through the Cloud Dashboard.\n */\nclass ReownAuthentication {\n    constructor(params = {}) {\n        this.otpUuid = null;\n        this.listeners = {\n            sessionChanged: []\n        };\n        this.localAuthStorageKey =\n            params.localAuthStorageKey ||\n                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorageKeys.SIWX_AUTH_TOKEN;\n        this.localNonceStorageKey =\n            params.localNonceStorageKey ||\n                _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorageKeys.SIWX_NONCE_TOKEN;\n        this.required = params.required ?? true;\n        this.messenger = new _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__.ReownAuthenticationMessenger({\n            getNonce: this.getNonce.bind(this)\n        });\n    }\n    async createMessage(input) {\n        return this.messenger.createMessage(input);\n    }\n    async addSession(session) {\n        const response = await this.request({\n            method: 'POST',\n            key: 'authenticate',\n            body: {\n                data: session.data,\n                message: session.message,\n                signature: session.signature,\n                clientId: this.getClientId(),\n                walletInfo: this.getWalletInfo()\n            },\n            headers: ['nonce', 'otp']\n        });\n        this.setStorageToken(response.token, this.localAuthStorageKey);\n        this.emit('sessionChanged', session);\n        this.setAppKitAccountUser(jwtDecode(response.token));\n        this.otpUuid = null;\n    }\n    async getSessions(chainId, address) {\n        try {\n            if (!this.getStorageToken(this.localAuthStorageKey)) {\n                return [];\n            }\n            const account = await this.request({\n                method: 'GET',\n                key: 'me',\n                query: {},\n                headers: ['auth']\n            });\n            if (!account) {\n                return [];\n            }\n            const isSameAddress = account.address.toLowerCase() === address.toLowerCase();\n            const isSameNetwork = account.caip2Network === chainId;\n            if (!isSameAddress || !isSameNetwork) {\n                return [];\n            }\n            const session = {\n                data: {\n                    accountAddress: account.address,\n                    chainId: account.caip2Network\n                },\n                message: '',\n                signature: ''\n            };\n            this.emit('sessionChanged', session);\n            this.setAppKitAccountUser(account);\n            return [session];\n        }\n        catch {\n            return [];\n        }\n    }\n    async revokeSession(_chainId, _address) {\n        return Promise.resolve(this.clearStorageTokens());\n    }\n    async setSessions(sessions) {\n        if (sessions.length === 0) {\n            this.clearStorageTokens();\n        }\n        else {\n            const session = (sessions.find(s => s.data.chainId === (0,_utils_ChainControllerUtil_js__WEBPACK_IMPORTED_MODULE_2__.getActiveCaipNetwork)()?.caipNetworkId) || sessions[0]);\n            await this.addSession(session);\n        }\n    }\n    getRequired() {\n        return this.required;\n    }\n    async getSessionAccount() {\n        if (!this.getStorageToken(this.localAuthStorageKey)) {\n            throw new Error('Not authenticated');\n        }\n        return this.request({\n            method: 'GET',\n            key: 'me',\n            body: undefined,\n            query: {\n                includeAppKitAccount: true\n            },\n            headers: ['auth']\n        });\n    }\n    async setSessionAccountMetadata(metadata = null) {\n        if (!this.getStorageToken(this.localAuthStorageKey)) {\n            throw new Error('Not authenticated');\n        }\n        return this.request({\n            method: 'PUT',\n            key: 'account-metadata',\n            body: { metadata },\n            headers: ['auth']\n        });\n    }\n    on(event, callback) {\n        this.listeners[event].push(callback);\n        return () => {\n            this.listeners[event] = this.listeners[event].filter(cb => cb !== callback);\n        };\n    }\n    removeAllListeners() {\n        const keys = Object.keys(this.listeners);\n        keys.forEach(key => {\n            this.listeners[key] = [];\n        });\n    }\n    async requestEmailOtp({ email, account }) {\n        const otp = await this.request({\n            method: 'POST',\n            key: 'otp',\n            body: { email, account }\n        });\n        this.otpUuid = otp.uuid;\n        this.messenger.resources = [`email:${email}`];\n        return otp;\n    }\n    confirmEmailOtp({ code }) {\n        return this.request({\n            method: 'PUT',\n            key: 'otp',\n            body: { code },\n            headers: ['otp']\n        });\n    }\n    async request({ method, key, query, body, headers }) {\n        const { projectId, st, sv } = this.getSDKProperties();\n        const url = new URL(`${_reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__.ConstantsUtil.W3M_API_URL}/auth/v1/${String(key)}`);\n        url.searchParams.set('projectId', projectId);\n        url.searchParams.set('st', st);\n        url.searchParams.set('sv', sv);\n        if (query) {\n            Object.entries(query).forEach(([queryKey, queryValue]) => url.searchParams.set(queryKey, String(queryValue)));\n        }\n        const response = await fetch(url, {\n            method,\n            body: body ? JSON.stringify(body) : undefined,\n            headers: Array.isArray(headers)\n                ? headers.reduce((acc, header) => {\n                    switch (header) {\n                        case 'nonce':\n                            acc['x-nonce-jwt'] = `Bearer ${this.getStorageToken(this.localNonceStorageKey)}`;\n                            break;\n                        case 'auth':\n                            acc['Authorization'] = `Bearer ${this.getStorageToken(this.localAuthStorageKey)}`;\n                            break;\n                        case 'otp':\n                            if (this.otpUuid) {\n                                acc['x-otp'] = this.otpUuid;\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                    return acc;\n                }, {})\n                : undefined\n        });\n        if (!response.ok) {\n            throw new Error(await response.text());\n        }\n        if (response.headers.get('content-type')?.includes('application/json')) {\n            return response.json();\n        }\n        return null;\n    }\n    getStorageToken(key) {\n        return _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.getItem(key);\n    }\n    setStorageToken(token, key) {\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.setItem(key, token);\n    }\n    clearStorageTokens() {\n        this.otpUuid = null;\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.removeItem(this.localAuthStorageKey);\n        _reown_appkit_common__WEBPACK_IMPORTED_MODULE_0__.SafeLocalStorage.removeItem(this.localNonceStorageKey);\n        this.emit('sessionChanged', undefined);\n    }\n    async getNonce() {\n        const { nonce, token } = await this.request({\n            method: 'GET',\n            key: 'nonce'\n        });\n        this.setStorageToken(token, this.localNonceStorageKey);\n        return nonce;\n    }\n    getClientId() {\n        return _controllers_BlockchainApiController_js__WEBPACK_IMPORTED_MODULE_4__.BlockchainApiController.state.clientId;\n    }\n    getWalletInfo() {\n        const walletInfo = _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_5__.ChainController.getAccountData()?.connectedWalletInfo;\n        if (!walletInfo) {\n            return undefined;\n        }\n        if ('social' in walletInfo && 'identifier' in walletInfo) {\n            const social = walletInfo['social'];\n            const identifier = walletInfo['identifier'];\n            return { type: 'social', social, identifier };\n        }\n        const { name, icon } = walletInfo;\n        let type = 'unknown';\n        switch (walletInfo.type) {\n            case 'EXTERNAL':\n            case 'INJECTED':\n            case 'ANNOUNCED':\n                type = 'extension';\n                break;\n            case 'WALLET_CONNECT':\n                type = 'walletconnect';\n                break;\n            default:\n                type = 'unknown';\n        }\n        return {\n            type,\n            name,\n            icon\n        };\n    }\n    getSDKProperties() {\n        return _controllers_ApiController_js__WEBPACK_IMPORTED_MODULE_6__.ApiController._getSdkProperties();\n    }\n    emit(event, data) {\n        this.listeners[event].forEach(listener => listener(data));\n    }\n    setAppKitAccountUser(session) {\n        const { email } = session;\n        if (email) {\n            Object.values(_reown_appkit_common__WEBPACK_IMPORTED_MODULE_3__.ConstantsUtil.CHAIN).forEach(chainNamespace => {\n                _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_5__.ChainController.setAccountProp('user', { email }, chainNamespace);\n            });\n        }\n    }\n}\n/**\n * Decodes a JWT token and returns its payload\n * @param token - The JWT token to decode\n * @returns The decoded payload or null if invalid\n */\nfunction jwtDecode(token) {\n    // Split the token into parts\n    const parts = token.split('.');\n    // Check if the token has the correct format (header.payload.signature)\n    if (parts.length !== 3) {\n        throw new Error('Invalid token');\n    }\n    // Decode the payload (second part)\n    const payload = parts[1];\n    if (typeof payload !== 'string') {\n        throw new Error('Invalid token');\n    }\n    // Convert base64url to base64\n    const base64 = payload.replace(/-/gu, '+').replace(/_/gu, '/');\n    // Add padding if needed\n    const padded = base64.padEnd(base64.length + ((4 - (base64.length % 4)) % 4), '=');\n    // Decode and parse the JSON\n    const decoded = JSON.parse(atob(padded));\n    return decoded;\n}\n//# sourceMappingURL=ReownAuthentication.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9zaXd4L3Jlb3duLWF1dGhlbnRpY2F0aW9uL1Jlb3duQXV0aGVudGljYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUM2RjtBQUN2QjtBQUNvQjtBQUNoQjtBQUNHO0FBQ0k7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0VBQW9CO0FBQ3BDO0FBQ0E7QUFDQSxnQkFBZ0Isc0VBQW9CO0FBQ3BDO0FBQ0EsNkJBQTZCLDBGQUE0QjtBQUN6RDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxtRkFBb0I7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixTQUFTO0FBQ1Q7QUFDQSw2Q0FBNkMsTUFBTTtBQUNuRDtBQUNBO0FBQ0Esc0JBQXNCLE1BQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE1BQU07QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxvQkFBb0IsbUNBQW1DO0FBQ3ZELGdCQUFnQixvQkFBb0I7QUFDcEMsK0JBQStCLCtEQUFhLGFBQWEsV0FBVyxZQUFZO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdEQUFnRDtBQUMzRztBQUNBO0FBQ0EsNkRBQTZELCtDQUErQztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixJQUFJO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0VBQWdCO0FBQy9CO0FBQ0E7QUFDQSxRQUFRLGtFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFnQjtBQUN4QixRQUFRLGtFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0RkFBdUI7QUFDdEM7QUFDQTtBQUNBLDJCQUEyQiw0RUFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3RUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQSwwQkFBMEIsK0RBQWE7QUFDdkMsZ0JBQWdCLDRFQUFlLDBCQUEwQixPQUFPO0FBQ2hFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9zaXd4L3Jlb3duLWF1dGhlbnRpY2F0aW9uL1Jlb3duQXV0aGVudGljYXRpb24uanM/N2JiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuaW1wb3J0IHsgQ29uc3RhbnRzVXRpbCwgU2FmZUxvY2FsU3RvcmFnZSwgU2FmZUxvY2FsU3RvcmFnZUtleXMgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbW1vbic7XG5pbXBvcnQgeyBBcGlDb250cm9sbGVyIH0gZnJvbSAnLi4vLi4vLi4vY29udHJvbGxlcnMvQXBpQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgeyBCbG9ja2NoYWluQXBpQ29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL2NvbnRyb2xsZXJzL0Jsb2NrY2hhaW5BcGlDb250cm9sbGVyLmpzJztcbmltcG9ydCB7IENoYWluQ29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL2NvbnRyb2xsZXJzL0NoYWluQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVDYWlwTmV0d29yayB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL0NoYWluQ29udHJvbGxlclV0aWwuanMnO1xuaW1wb3J0IHsgUmVvd25BdXRoZW50aWNhdGlvbk1lc3NlbmdlciB9IGZyb20gJy4vUmVvd25BdXRoZW50aWNhdGlvbk1lc3Nlbmdlci5qcyc7XG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHVzaW5nIFNJV1ggd2l0aCBSZW93biBBdXRoZW50aWNhdGlvbiBzZXJ2aWNlLlxuICogSXQgYWxsb3dzIHlvdSB0byBhdXRoZW50aWNhdGUgYW5kIGNhcHR1cmUgdXNlciBzZXNzaW9ucyB0aHJvdWdoIHRoZSBDbG91ZCBEYXNoYm9hcmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW93bkF1dGhlbnRpY2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSkge1xuICAgICAgICB0aGlzLm90cFV1aWQgPSBudWxsO1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHtcbiAgICAgICAgICAgIHNlc3Npb25DaGFuZ2VkOiBbXVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvY2FsQXV0aFN0b3JhZ2VLZXkgPVxuICAgICAgICAgICAgcGFyYW1zLmxvY2FsQXV0aFN0b3JhZ2VLZXkgfHxcbiAgICAgICAgICAgICAgICBTYWZlTG9jYWxTdG9yYWdlS2V5cy5TSVdYX0FVVEhfVE9LRU47XG4gICAgICAgIHRoaXMubG9jYWxOb25jZVN0b3JhZ2VLZXkgPVxuICAgICAgICAgICAgcGFyYW1zLmxvY2FsTm9uY2VTdG9yYWdlS2V5IHx8XG4gICAgICAgICAgICAgICAgU2FmZUxvY2FsU3RvcmFnZUtleXMuU0lXWF9OT05DRV9UT0tFTjtcbiAgICAgICAgdGhpcy5yZXF1aXJlZCA9IHBhcmFtcy5yZXF1aXJlZCA/PyB0cnVlO1xuICAgICAgICB0aGlzLm1lc3NlbmdlciA9IG5ldyBSZW93bkF1dGhlbnRpY2F0aW9uTWVzc2VuZ2VyKHtcbiAgICAgICAgICAgIGdldE5vbmNlOiB0aGlzLmdldE5vbmNlLmJpbmQodGhpcylcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZU1lc3NhZ2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2VuZ2VyLmNyZWF0ZU1lc3NhZ2UoaW5wdXQpO1xuICAgIH1cbiAgICBhc3luYyBhZGRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBrZXk6ICdhdXRoZW50aWNhdGUnLFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlc3Npb24uZGF0YSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBzZXNzaW9uLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBzZXNzaW9uLnNpZ25hdHVyZSxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5nZXRDbGllbnRJZCgpLFxuICAgICAgICAgICAgICAgIHdhbGxldEluZm86IHRoaXMuZ2V0V2FsbGV0SW5mbygpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVhZGVyczogWydub25jZScsICdvdHAnXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRTdG9yYWdlVG9rZW4ocmVzcG9uc2UudG9rZW4sIHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSk7XG4gICAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbkNoYW5nZWQnLCBzZXNzaW9uKTtcbiAgICAgICAgdGhpcy5zZXRBcHBLaXRBY2NvdW50VXNlcihqd3REZWNvZGUocmVzcG9uc2UudG9rZW4pKTtcbiAgICAgICAgdGhpcy5vdHBVdWlkID0gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2Vzc2lvbnMoY2hhaW5JZCwgYWRkcmVzcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldFN0b3JhZ2VUb2tlbih0aGlzLmxvY2FsQXV0aFN0b3JhZ2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBrZXk6ICdtZScsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHt9LFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IFsnYXV0aCddXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlzU2FtZUFkZHJlc3MgPSBhY2NvdW50LmFkZHJlc3MudG9Mb3dlckNhc2UoKSA9PT0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgaXNTYW1lTmV0d29yayA9IGFjY291bnQuY2FpcDJOZXR3b3JrID09PSBjaGFpbklkO1xuICAgICAgICAgICAgaWYgKCFpc1NhbWVBZGRyZXNzIHx8ICFpc1NhbWVOZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRBZGRyZXNzOiBhY2NvdW50LmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGFjY291bnQuY2FpcDJOZXR3b3JrXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJyxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6ICcnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdzZXNzaW9uQ2hhbmdlZCcsIHNlc3Npb24pO1xuICAgICAgICAgICAgdGhpcy5zZXRBcHBLaXRBY2NvdW50VXNlcihhY2NvdW50KTtcbiAgICAgICAgICAgIHJldHVybiBbc2Vzc2lvbl07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJldm9rZVNlc3Npb24oX2NoYWluSWQsIF9hZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jbGVhclN0b3JhZ2VUb2tlbnMoKSk7XG4gICAgfVxuICAgIGFzeW5jIHNldFNlc3Npb25zKHNlc3Npb25zKSB7XG4gICAgICAgIGlmIChzZXNzaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTdG9yYWdlVG9rZW5zKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gKHNlc3Npb25zLmZpbmQocyA9PiBzLmRhdGEuY2hhaW5JZCA9PT0gZ2V0QWN0aXZlQ2FpcE5ldHdvcmsoKT8uY2FpcE5ldHdvcmtJZCkgfHwgc2Vzc2lvbnNbMF0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlcXVpcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlZDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2Vzc2lvbkFjY291bnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5nZXRTdG9yYWdlVG9rZW4odGhpcy5sb2NhbEF1dGhTdG9yYWdlS2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYXV0aGVudGljYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGtleTogJ21lJyxcbiAgICAgICAgICAgIGJvZHk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZUFwcEtpdEFjY291bnQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiBbJ2F1dGgnXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2V0U2Vzc2lvbkFjY291bnRNZXRhZGF0YShtZXRhZGF0YSA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdldFN0b3JhZ2VUb2tlbih0aGlzLmxvY2FsQXV0aFN0b3JhZ2VLZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhdXRoZW50aWNhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAga2V5OiAnYWNjb3VudC1tZXRhZGF0YScsXG4gICAgICAgICAgICBib2R5OiB7IG1ldGFkYXRhIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiBbJ2F1dGgnXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb24oZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IHRoaXMubGlzdGVuZXJzW2V2ZW50XS5maWx0ZXIoY2IgPT4gY2IgIT09IGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVtb3ZlQWxsTGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpO1xuICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHJlcXVlc3RFbWFpbE90cCh7IGVtYWlsLCBhY2NvdW50IH0pIHtcbiAgICAgICAgY29uc3Qgb3RwID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAga2V5OiAnb3RwJyxcbiAgICAgICAgICAgIGJvZHk6IHsgZW1haWwsIGFjY291bnQgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdHBVdWlkID0gb3RwLnV1aWQ7XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyLnJlc291cmNlcyA9IFtgZW1haWw6JHtlbWFpbH1gXTtcbiAgICAgICAgcmV0dXJuIG90cDtcbiAgICB9XG4gICAgY29uZmlybUVtYWlsT3RwKHsgY29kZSB9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGtleTogJ290cCcsXG4gICAgICAgICAgICBib2R5OiB7IGNvZGUgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IFsnb3RwJ11cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHJlcXVlc3QoeyBtZXRob2QsIGtleSwgcXVlcnksIGJvZHksIGhlYWRlcnMgfSkge1xuICAgICAgICBjb25zdCB7IHByb2plY3RJZCwgc3QsIHN2IH0gPSB0aGlzLmdldFNES1Byb3BlcnRpZXMoKTtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHtDb25zdGFudHNVdGlsLlczTV9BUElfVVJMfS9hdXRoL3YxLyR7U3RyaW5nKGtleSl9YCk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcm9qZWN0SWQnLCBwcm9qZWN0SWQpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc3QnLCBzdCk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdicsIHN2KTtcbiAgICAgICAgaWYgKHF1ZXJ5KSB7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhxdWVyeSkuZm9yRWFjaCgoW3F1ZXJ5S2V5LCBxdWVyeVZhbHVlXSkgPT4gdXJsLnNlYXJjaFBhcmFtcy5zZXQocXVlcnlLZXksIFN0cmluZyhxdWVyeVZhbHVlKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiBBcnJheS5pc0FycmF5KGhlYWRlcnMpXG4gICAgICAgICAgICAgICAgPyBoZWFkZXJzLnJlZHVjZSgoYWNjLCBoZWFkZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vbmNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NbJ3gtbm9uY2Utand0J10gPSBgQmVhcmVyICR7dGhpcy5nZXRTdG9yYWdlVG9rZW4odGhpcy5sb2NhbE5vbmNlU3RvcmFnZUtleSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2F1dGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuZ2V0U3RvcmFnZVRva2VuKHRoaXMubG9jYWxBdXRoU3RvcmFnZUtleSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ290cCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3RwVXVpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NbJ3gtb3RwJ10gPSB0aGlzLm90cFV1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIHt9KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpPy5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXRTdG9yYWdlVG9rZW4oa2V5KSB7XG4gICAgICAgIHJldHVybiBTYWZlTG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICB9XG4gICAgc2V0U3RvcmFnZVRva2VuKHRva2VuLCBrZXkpIHtcbiAgICAgICAgU2FmZUxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdG9rZW4pO1xuICAgIH1cbiAgICBjbGVhclN0b3JhZ2VUb2tlbnMoKSB7XG4gICAgICAgIHRoaXMub3RwVXVpZCA9IG51bGw7XG4gICAgICAgIFNhZmVMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvY2FsQXV0aFN0b3JhZ2VLZXkpO1xuICAgICAgICBTYWZlTG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbE5vbmNlU3RvcmFnZUtleSk7XG4gICAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbkNoYW5nZWQnLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBhc3luYyBnZXROb25jZSgpIHtcbiAgICAgICAgY29uc3QgeyBub25jZSwgdG9rZW4gfSA9IGF3YWl0IHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAga2V5OiAnbm9uY2UnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFN0b3JhZ2VUb2tlbih0b2tlbiwgdGhpcy5sb2NhbE5vbmNlU3RvcmFnZUtleSk7XG4gICAgICAgIHJldHVybiBub25jZTtcbiAgICB9XG4gICAgZ2V0Q2xpZW50SWQoKSB7XG4gICAgICAgIHJldHVybiBCbG9ja2NoYWluQXBpQ29udHJvbGxlci5zdGF0ZS5jbGllbnRJZDtcbiAgICB9XG4gICAgZ2V0V2FsbGV0SW5mbygpIHtcbiAgICAgICAgY29uc3Qgd2FsbGV0SW5mbyA9IENoYWluQ29udHJvbGxlci5nZXRBY2NvdW50RGF0YSgpPy5jb25uZWN0ZWRXYWxsZXRJbmZvO1xuICAgICAgICBpZiAoIXdhbGxldEluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdzb2NpYWwnIGluIHdhbGxldEluZm8gJiYgJ2lkZW50aWZpZXInIGluIHdhbGxldEluZm8pIHtcbiAgICAgICAgICAgIGNvbnN0IHNvY2lhbCA9IHdhbGxldEluZm9bJ3NvY2lhbCddO1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpZmllciA9IHdhbGxldEluZm9bJ2lkZW50aWZpZXInXTtcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdzb2NpYWwnLCBzb2NpYWwsIGlkZW50aWZpZXIgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG5hbWUsIGljb24gfSA9IHdhbGxldEluZm87XG4gICAgICAgIGxldCB0eXBlID0gJ3Vua25vd24nO1xuICAgICAgICBzd2l0Y2ggKHdhbGxldEluZm8udHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnRVhURVJOQUwnOlxuICAgICAgICAgICAgY2FzZSAnSU5KRUNURUQnOlxuICAgICAgICAgICAgY2FzZSAnQU5OT1VOQ0VEJzpcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2V4dGVuc2lvbic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdXQUxMRVRfQ09OTkVDVCc6XG4gICAgICAgICAgICAgICAgdHlwZSA9ICd3YWxsZXRjb25uZWN0JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdHlwZSA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpY29uXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFNES1Byb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiBBcGlDb250cm9sbGVyLl9nZXRTZGtQcm9wZXJ0aWVzKCk7XG4gICAgfVxuICAgIGVtaXQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoZGF0YSkpO1xuICAgIH1cbiAgICBzZXRBcHBLaXRBY2NvdW50VXNlcihzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHNlc3Npb247XG4gICAgICAgIGlmIChlbWFpbCkge1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhDb25zdGFudHNVdGlsLkNIQUlOKS5mb3JFYWNoKGNoYWluTmFtZXNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICBDaGFpbkNvbnRyb2xsZXIuc2V0QWNjb3VudFByb3AoJ3VzZXInLCB7IGVtYWlsIH0sIGNoYWluTmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBEZWNvZGVzIGEgSldUIHRva2VuIGFuZCByZXR1cm5zIGl0cyBwYXlsb2FkXG4gKiBAcGFyYW0gdG9rZW4gLSBUaGUgSldUIHRva2VuIHRvIGRlY29kZVxuICogQHJldHVybnMgVGhlIGRlY29kZWQgcGF5bG9hZCBvciBudWxsIGlmIGludmFsaWRcbiAqL1xuZnVuY3Rpb24gand0RGVjb2RlKHRva2VuKSB7XG4gICAgLy8gU3BsaXQgdGhlIHRva2VuIGludG8gcGFydHNcbiAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRva2VuIGhhcyB0aGUgY29ycmVjdCBmb3JtYXQgKGhlYWRlci5wYXlsb2FkLnNpZ25hdHVyZSlcbiAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICAgIH1cbiAgICAvLyBEZWNvZGUgdGhlIHBheWxvYWQgKHNlY29uZCBwYXJ0KVxuICAgIGNvbnN0IHBheWxvYWQgPSBwYXJ0c1sxXTtcbiAgICBpZiAodHlwZW9mIHBheWxvYWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IGJhc2U2NHVybCB0byBiYXNlNjRcbiAgICBjb25zdCBiYXNlNjQgPSBwYXlsb2FkLnJlcGxhY2UoLy0vZ3UsICcrJykucmVwbGFjZSgvXy9ndSwgJy8nKTtcbiAgICAvLyBBZGQgcGFkZGluZyBpZiBuZWVkZWRcbiAgICBjb25zdCBwYWRkZWQgPSBiYXNlNjQucGFkRW5kKGJhc2U2NC5sZW5ndGggKyAoKDQgLSAoYmFzZTY0Lmxlbmd0aCAlIDQpKSAlIDQpLCAnPScpO1xuICAgIC8vIERlY29kZSBhbmQgcGFyc2UgdGhlIEpTT05cbiAgICBjb25zdCBkZWNvZGVkID0gSlNPTi5wYXJzZShhdG9iKHBhZGRlZCkpO1xuICAgIHJldHVybiBkZWNvZGVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVvd25BdXRoZW50aWNhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthentication.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthenticationMessenger.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthenticationMessenger.js ***!
  \********************************************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* binding */ ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _reown_appkit_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @reown/appkit-common */ \"(app-pages-browser)/./node_modules/@reown/appkit-common/dist/esm/src/utils/NetworkUtil.js\");\n/* harmony import */ var _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../controllers/ChainController.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/controllers/ChainController.js\");\n\n\nclass ReownAuthenticationMessenger {\n    constructor(params) {\n        this.getNonce = params.getNonce;\n    }\n    async createMessage(input) {\n        const params = {\n            accountAddress: input.accountAddress,\n            chainId: input.chainId,\n            version: '1',\n            domain: typeof document === 'undefined' ? 'Unknown Domain' : document.location.host,\n            uri: typeof document === 'undefined' ? 'Unknown URI' : document.location.href,\n            resources: this.resources,\n            nonce: await this.getNonce(input),\n            issuedAt: this.stringifyDate(new Date()),\n            statement: undefined,\n            expirationTime: undefined,\n            notBefore: undefined\n        };\n        const methods = {\n            toString: () => this.stringify(params)\n        };\n        return Object.assign(params, methods);\n    }\n    stringify(params) {\n        const networkName = this.getNetworkName(params.chainId);\n        return [\n            `${params.domain} wants you to sign in with your ${networkName} account:`,\n            params.accountAddress,\n            params.statement ? `\\n${params.statement}\\n` : '',\n            `URI: ${params.uri}`,\n            `Version: ${params.version}`,\n            `Chain ID: ${params.chainId}`,\n            `Nonce: ${params.nonce}`,\n            params.issuedAt && `Issued At: ${params.issuedAt}`,\n            params.expirationTime && `Expiration Time: ${params.expirationTime}`,\n            params.notBefore && `Not Before: ${params.notBefore}`,\n            params.requestId && `Request ID: ${params.requestId}`,\n            params.resources?.length &&\n                params.resources.reduce((acc, resource) => `${acc}\\n- ${resource}`, 'Resources:')\n        ]\n            .filter(line => typeof line === 'string')\n            .join('\\n')\n            .trim();\n    }\n    getNetworkName(chainId) {\n        const requestedNetworks = _controllers_ChainController_js__WEBPACK_IMPORTED_MODULE_0__.ChainController.getAllRequestedCaipNetworks();\n        return _reown_appkit_common__WEBPACK_IMPORTED_MODULE_1__.NetworkUtil.getNetworkNameByCaipNetworkId(requestedNetworks, chainId);\n    }\n    stringifyDate(date) {\n        return date.toISOString();\n    }\n}\n//# sourceMappingURL=ReownAuthenticationMessenger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9zaXd4L3Jlb3duLWF1dGhlbnRpY2F0aW9uL1Jlb3duQXV0aGVudGljYXRpb25NZXNzZW5nZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ3VCO0FBQ25FO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWUsaUNBQWlDLGFBQWE7QUFDNUU7QUFDQSxvQ0FBb0MsaUJBQWlCO0FBQ3JELG9CQUFvQixXQUFXO0FBQy9CLHdCQUF3QixlQUFlO0FBQ3ZDLHlCQUF5QixlQUFlO0FBQ3hDLHNCQUFzQixhQUFhO0FBQ25DLDZDQUE2QyxnQkFBZ0I7QUFDN0QseURBQXlELHNCQUFzQjtBQUMvRSwrQ0FBK0MsaUJBQWlCO0FBQ2hFLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQSw4REFBOEQsSUFBSSxNQUFNLFNBQVM7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDRFQUFlO0FBQ2pELGVBQWUsNkRBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9zaXd4L3Jlb3duLWF1dGhlbnRpY2F0aW9uL1Jlb3duQXV0aGVudGljYXRpb25NZXNzZW5nZXIuanM/M2VmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXR3b3JrVXRpbCB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29tbW9uJztcbmltcG9ydCB7IENoYWluQ29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL2NvbnRyb2xsZXJzL0NoYWluQ29udHJvbGxlci5qcyc7XG5leHBvcnQgY2xhc3MgUmVvd25BdXRoZW50aWNhdGlvbk1lc3NlbmdlciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHRoaXMuZ2V0Tm9uY2UgPSBwYXJhbXMuZ2V0Tm9uY2U7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZU1lc3NhZ2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgYWNjb3VudEFkZHJlc3M6IGlucHV0LmFjY291bnRBZGRyZXNzLFxuICAgICAgICAgICAgY2hhaW5JZDogaW5wdXQuY2hhaW5JZCxcbiAgICAgICAgICAgIHZlcnNpb246ICcxJyxcbiAgICAgICAgICAgIGRvbWFpbjogdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyA/ICdVbmtub3duIERvbWFpbicgOiBkb2N1bWVudC5sb2NhdGlvbi5ob3N0LFxuICAgICAgICAgICAgdXJpOiB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ1Vua25vd24gVVJJJyA6IGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsXG4gICAgICAgICAgICByZXNvdXJjZXM6IHRoaXMucmVzb3VyY2VzLFxuICAgICAgICAgICAgbm9uY2U6IGF3YWl0IHRoaXMuZ2V0Tm9uY2UoaW5wdXQpLFxuICAgICAgICAgICAgaXNzdWVkQXQ6IHRoaXMuc3RyaW5naWZ5RGF0ZShuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgIHN0YXRlbWVudDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG5vdEJlZm9yZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSB7XG4gICAgICAgICAgICB0b1N0cmluZzogKCkgPT4gdGhpcy5zdHJpbmdpZnkocGFyYW1zKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwYXJhbXMsIG1ldGhvZHMpO1xuICAgIH1cbiAgICBzdHJpbmdpZnkocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IG5ldHdvcmtOYW1lID0gdGhpcy5nZXROZXR3b3JrTmFtZShwYXJhbXMuY2hhaW5JZCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBgJHtwYXJhbXMuZG9tYWlufSB3YW50cyB5b3UgdG8gc2lnbiBpbiB3aXRoIHlvdXIgJHtuZXR3b3JrTmFtZX0gYWNjb3VudDpgLFxuICAgICAgICAgICAgcGFyYW1zLmFjY291bnRBZGRyZXNzLFxuICAgICAgICAgICAgcGFyYW1zLnN0YXRlbWVudCA/IGBcXG4ke3BhcmFtcy5zdGF0ZW1lbnR9XFxuYCA6ICcnLFxuICAgICAgICAgICAgYFVSSTogJHtwYXJhbXMudXJpfWAsXG4gICAgICAgICAgICBgVmVyc2lvbjogJHtwYXJhbXMudmVyc2lvbn1gLFxuICAgICAgICAgICAgYENoYWluIElEOiAke3BhcmFtcy5jaGFpbklkfWAsXG4gICAgICAgICAgICBgTm9uY2U6ICR7cGFyYW1zLm5vbmNlfWAsXG4gICAgICAgICAgICBwYXJhbXMuaXNzdWVkQXQgJiYgYElzc3VlZCBBdDogJHtwYXJhbXMuaXNzdWVkQXR9YCxcbiAgICAgICAgICAgIHBhcmFtcy5leHBpcmF0aW9uVGltZSAmJiBgRXhwaXJhdGlvbiBUaW1lOiAke3BhcmFtcy5leHBpcmF0aW9uVGltZX1gLFxuICAgICAgICAgICAgcGFyYW1zLm5vdEJlZm9yZSAmJiBgTm90IEJlZm9yZTogJHtwYXJhbXMubm90QmVmb3JlfWAsXG4gICAgICAgICAgICBwYXJhbXMucmVxdWVzdElkICYmIGBSZXF1ZXN0IElEOiAke3BhcmFtcy5yZXF1ZXN0SWR9YCxcbiAgICAgICAgICAgIHBhcmFtcy5yZXNvdXJjZXM/Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHBhcmFtcy5yZXNvdXJjZXMucmVkdWNlKChhY2MsIHJlc291cmNlKSA9PiBgJHthY2N9XFxuLSAke3Jlc291cmNlfWAsICdSZXNvdXJjZXM6JylcbiAgICAgICAgXVxuICAgICAgICAgICAgLmZpbHRlcihsaW5lID0+IHR5cGVvZiBsaW5lID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKTtcbiAgICB9XG4gICAgZ2V0TmV0d29ya05hbWUoY2hhaW5JZCkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWROZXR3b3JrcyA9IENoYWluQ29udHJvbGxlci5nZXRBbGxSZXF1ZXN0ZWRDYWlwTmV0d29ya3MoKTtcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtVdGlsLmdldE5ldHdvcmtOYW1lQnlDYWlwTmV0d29ya0lkKHJlcXVlc3RlZE5ldHdvcmtzLCBjaGFpbklkKTtcbiAgICB9XG4gICAgc3RyaW5naWZ5RGF0ZShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVvd25BdXRoZW50aWNhdGlvbk1lc3Nlbmdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthenticationMessenger.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/index.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/index.js ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReownAuthentication: function() { return /* reexport safe */ _ReownAuthentication_js__WEBPACK_IMPORTED_MODULE_0__.ReownAuthentication; },\n/* harmony export */   ReownAuthenticationMessenger: function() { return /* reexport safe */ _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__.ReownAuthenticationMessenger; }\n/* harmony export */ });\n/* harmony import */ var _ReownAuthentication_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ReownAuthentication.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthentication.js\");\n/* harmony import */ var _ReownAuthenticationMessenger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReownAuthenticationMessenger.js */ \"(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/ReownAuthenticationMessenger.js\");\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzL2Rpc3QvZXNtL3NyYy9mZWF0dXJlcy9zaXd4L3Jlb3duLWF1dGhlbnRpY2F0aW9uL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUM7QUFDUztBQUNsRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1jb250cm9sbGVycy9kaXN0L2VzbS9zcmMvZmVhdHVyZXMvc2l3eC9yZW93bi1hdXRoZW50aWNhdGlvbi9pbmRleC5qcz9lMTBhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vUmVvd25BdXRoZW50aWNhdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL1Jlb3duQXV0aGVudGljYXRpb25NZXNzZW5nZXIuanMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@reown/appkit-controllers/dist/esm/src/features/siwx/reown-authentication/index.js\n"));

/***/ })

}]);